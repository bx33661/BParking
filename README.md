<div align="center">

# ğŸš— BParkingåœè½¦åœºç®¡ç†ç³»ç»Ÿ

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Language](https://img.shields.io/badge/Language-C-blue.svg)](https://en.wikipedia.org/wiki/C_(programming_language))
[![Platform](https://img.shields.io/badge/Platform-Windows-lightgrey.svg)](https://www.microsoft.com/windows)
[![Status](https://img.shields.io/badge/Status-Active-success.svg)]()

*åŸºäºæ•°æ®ç»“æ„è¯¾ç¨‹è®¾è®¡çš„åœè½¦åœºç®¡ç†ç³»ç»Ÿ*

<img src="./public/logo.png" alt="BParking Logo" width="300"/>

</div>

## ğŸ“ é¡¹ç›®æ¦‚è¿°

BParkingæ˜¯ä¸€ä¸ªåŸºäºCè¯­è¨€å¼€å‘çš„åœè½¦åœºç®¡ç†ç³»ç»Ÿï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå‡ºå…¥å£çš„ç‹­é•¿åœè½¦åœºçš„è¿ä½œæµç¨‹ã€‚ç³»ç»Ÿå®ç°äº†è½¦è¾†è¿›å‡ºç®¡ç†ã€è´¹ç”¨è®¡ç®—ã€çŠ¶æ€æ˜¾ç¤ºç­‰åŠŸèƒ½ï¼Œå¹¶é‡‡ç”¨äº†æ ˆå’Œé˜Ÿåˆ—æ•°æ®ç»“æ„æ¥æ¨¡æ‹Ÿåœè½¦åœºå’Œä¾¿é“çš„è¿ä½œæœºåˆ¶ã€‚

### âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸš˜ **è½¦è¾†è¿›å‡ºç®¡ç†**ï¼šè®°å½•è½¦è¾†è¿›å…¥å’Œç¦»å¼€åœè½¦åœºçš„æ—¶é—´å’Œä½ç½®
- ğŸ’° **è´¹ç”¨è®¡ç®—**ï¼šæ ¹æ®åœè½¦æ—¶é•¿è‡ªåŠ¨è®¡ç®—åœè½¦è´¹ç”¨
- ğŸ“Š **çŠ¶æ€æ˜¾ç¤º**ï¼šå®æ—¶æ˜¾ç¤ºåœè½¦åœºå’Œä¾¿é“çš„è½¦è¾†çŠ¶æ€
- ğŸ’¾ **çŠ¶æ€ä¿å­˜**ï¼šæ”¯æŒä¿å­˜å’Œæ¢å¤ç³»ç»ŸçŠ¶æ€
- ğŸ–¥ï¸ **å‹å¥½ç•Œé¢**ï¼šæä¾›ç®€æ´ç›´è§‚çš„å‘½ä»¤è¡Œç•Œé¢

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æ•°æ®ç»“æ„è®¾è®¡

ç³»ç»Ÿä½¿ç”¨äº†ä»¥ä¸‹æ•°æ®ç»“æ„ï¼š

- **åœè½¦åœºæ ˆï¼ˆé¡ºåºæ ˆï¼‰**ï¼šç”¨äºå­˜å‚¨åœè½¦åœºå†…çš„è½¦è¾†ï¼Œå…ˆè¿›åå‡ºï¼ˆLIFOï¼‰ç‰¹æ€§ç¬¦åˆåœè½¦åœºçš„è¿ä½œæ–¹å¼
- **ä¸´æ—¶æ ˆ**ï¼šç”¨äºä¸´æ—¶å­˜å‚¨ä¸ºç¦»å¼€è½¦è¾†è®©è·¯çš„è½¦è¾†
- **ä¾¿é“é˜Ÿåˆ—ï¼ˆé“¾å¼é˜Ÿåˆ—ï¼‰**ï¼šç”¨äºå­˜å‚¨ç­‰å€™è¿›å…¥åœè½¦åœºçš„è½¦è¾†ï¼Œå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ç‰¹æ€§ç¬¦åˆä¾¿é“ç­‰å€™çš„è¿ä½œæ–¹å¼

### ç³»ç»Ÿæ¶æ„å›¾

```bash
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ç”¨æˆ·äº¤äº’ç•Œé¢          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       åœè½¦åœºç®¡ç†ç³»ç»Ÿ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ åœè½¦åœºæ ˆ  â”‚ â”‚ ä¾¿é“é˜Ÿåˆ—  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```bash
BParking/
â”œâ”€â”€ main.c         # ä¸»ç¨‹åºï¼ŒåŒ…å«ç”¨æˆ·äº¤äº’ç•Œé¢
â”œâ”€â”€ parking.c      # å®ç°æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰åŠŸèƒ½å‡½æ•°çš„å®ç°
â”œâ”€â”€ parking.h      # å¤´æ–‡ä»¶ï¼ŒåŒ…å«æ•°æ®ç»“æ„å®šä¹‰å’Œå‡½æ•°å£°æ˜
â”œâ”€â”€ run.bat        # Windowsæ‰¹å¤„ç†æ–‡ä»¶ï¼Œç”¨äºè¿è¡Œç¨‹åº
â”œâ”€â”€ compile.bat    # Windowsæ‰¹å¤„ç†æ–‡ä»¶ï¼Œç”¨äºç¼–è¯‘é¡¹ç›®
â””â”€â”€ README.md      # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ’» æ ¸å¿ƒæ•°æ®ç»“æ„

### è½¦è¾†ä¿¡æ¯ç»“æ„ä½“

```c
typedef struct {
    char plateNumber[MAX_PLATE_LEN]; // è½¦ç‰Œå·ï¼ˆæ”¯æŒä¸­æ–‡å­—ç¬¦ï¼‰
    time_t arriveTime;               // åˆ°è¾¾æ—¶é—´
    time_t leaveTime;                // ç¦»å¼€æ—¶é—´
} Car;
```

### åœè½¦åœºæ ˆç»“æ„

```c
typedef struct {
    Car data[STACKSIZE];
    int top;
} ParkingStack;
```

### ä¾¿é“é˜Ÿåˆ—

```c
typedef struct {
    QueueNode *front;
    QueueNode *rear;
    int count;         // é˜Ÿåˆ—ä¸­çš„è½¦è¾†æ•°é‡
} WaitingQueue;
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. è½¦è¾†è¿›å…¥åœè½¦åœº

```c
int parkCar(ParkingStack *parkingLot, WaitingQueue *waitingLane, const char *plateNumber) {
    // æ£€æŸ¥è½¦ç‰Œå·æ˜¯å¦å·²å­˜åœ¨
    if (isCarExists(parkingLot, waitingLane, plateNumber)) {
        return ERR_EXISTS; // è½¦ç‰Œå·å·²å­˜åœ¨
    }
    
    // åˆ›å»ºæ–°è½¦è¾†
    Car newCar = createCar(plateNumber);
    
    if (!isStackFull(parkingLot)) {
        // åœè½¦åœºæœ‰ç©ºä½ï¼Œç›´æ¥è¿›å…¥
        return push(parkingLot, newCar);
    } else {
        // åœè½¦åœºå·²æ»¡ï¼Œè¿›å…¥ä¾¿é“ç­‰å€™
        return enqueue(waitingLane, newCar);
    }
}
```

### 2. è½¦è¾†ç¦»å¼€åœè½¦åœº

```c
int leaveCar(ParkingStack *parkingLot, ParkingStack *tempLot, WaitingQueue *waitingLane, const char *plateNumber, SystemStats *stats) {
    // æŸ¥æ‰¾è½¦è¾†ä½ç½®
    int position = findCarPosition(parkingLot, plateNumber);
    
    if (position == -1) {
        return ERR_NOT_FOUND; // è½¦è¾†ä¸åœ¨åœè½¦åœºä¸­
    }
    
    // å°†ä¸Šæ–¹è½¦è¾†ç§»åˆ°ä¸´æ—¶æ ˆ
    int carsToMove = parkingLot->top - position;
    for (int i = 0; i < carsToMove; i++) {
        push(tempLot, pop(parkingLot));
    }
    
    // ç§»é™¤è¦ç¦»å¼€çš„è½¦è¾†å¹¶è®¡ç®—è´¹ç”¨
    Car leavingCar = pop(parkingLot);
    leavingCar.leaveTime = time(NULL);
    double fee = calculateFee(leavingCar);
    
    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    stats->totalCars++;
    stats->totalRevenue += fee;
    
    // å°†ä¸´æ—¶æ ˆä¸­çš„è½¦è¾†ç§»å›åœè½¦åœº
    while (!isStackEmpty(tempLot)) {
        push(parkingLot, pop(tempLot));
    }
    
    // å¦‚æœä¾¿é“æœ‰è½¦è¾†ç­‰å€™ï¼Œè®©å…¶è¿›å…¥åœè½¦åœº
    if (!isQueueEmpty(waitingLane)) {
        push(parkingLot, dequeue(waitingLane));
    }
    
    return SUCCESS;
    } else {
        fee = hours * 10.0;
        // å¦‚æœæœ‰åˆ†é’Ÿæˆ–ç§’ï¼Œåˆ™å¤šæ”¶å–ä¸€å°æ—¶è´¹ç”¨
        if (minutes > 0 || seconds > 0) {
            fee += 10.0;
        }
    }
    
    printf("\n===== åœè½¦è´¹ç”¨è®¡ç®— =====\n");
    printf("è½¦ç‰Œå·: %d\n", car.carNumber);
    printf("è¿›å…¥æ—¶é—´: %s\n", arriveTimeStr);
    printf("ç¦»å¼€æ—¶é—´: %s\n", leaveTimeStr);
    printf("åœè½¦æ—¶é—´: %då°æ—¶ %dåˆ†é’Ÿ %dç§’\n", hours, minutes, seconds);
    printf("åœè½¦è´¹ç”¨: %.2f å…ƒ\n", fee);
    printf("==========================\n");
}
```

## è¾…åŠ©åŠŸèƒ½è¯¦è§£

### 1. è½¦ç‰Œå·æŸ¥æ‰¾

å‡½æ•° `findCarPosition` ç”¨äºæŸ¥æ‰¾è½¦è¾†åœ¨åœè½¦åœºä¸­çš„ä½ç½®ï¼š

```c
int findCarPosition(ParkingStack *parkingLot, int carNumber) {
    if (isStackEmpty(parkingLot)) {
        return -1;
    }
    
    for (int i = 0; i <= parkingLot->top; i++) {
        if (parkingLot->data[i].carNumber == carNumber) {
            return i;
        }
    }
    
    return -1;
}
```

### 2. è½¦ç‰Œå·é‡å¤æ£€æŸ¥

å‡½æ•° `isCarNumberExists` ç”¨äºæ£€æŸ¥è½¦ç‰Œå·æ˜¯å¦å·²å­˜åœ¨äºåœè½¦åœºæˆ–ä¾¿é“ä¸­ï¼š

```c
int isCarNumberExists(ParkingStack *parkingLot, WaitingQueue *waitingLane, int carNumber) {
    // æ£€æŸ¥åœè½¦åœº
    for (int i = 0; i <= parkingLot->top; i++) {
        if (parkingLot->data[i].carNumber == carNumber) {
            return 1; // è½¦ç‰Œå·å·²å­˜åœ¨äºåœè½¦åœº
        }
    }
    
    // æ£€æŸ¥ä¾¿é“
    QueueNode *current = waitingLane->front;
    while (current != NULL) {
        if (current->car.carNumber == carNumber) {
            return 2; // è½¦ç‰Œå·å·²å­˜åœ¨äºä¾¿é“
        }
        current = current->next;
    }
    
    return 0; // è½¦ç‰Œå·ä¸å­˜åœ¨
}
```

### 3. é˜Ÿåˆ—å†…å­˜æ¸…ç†

å‡½æ•° `clearQueue` ç”¨äºæ¸…ç©ºé˜Ÿåˆ—å¹¶é‡Šæ”¾æ‰€æœ‰å†…å­˜ï¼š

```c
void clearQueue(WaitingQueue *queue) {
    while (!isQueueEmpty(queue)) {
        dequeue(queue);
    }
}
```

## ç”¨æˆ·ç•Œé¢

ç³»ç»Ÿæä¾›äº†ç®€å•çš„æ–‡æœ¬ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¾“å…¥å‘½ä»¤å’Œè½¦ç‰Œå·æ¥æ“ä½œç³»ç»Ÿï¼š

1. è½¦è¾†è¿›å…¥ï¼šè¾“å…¥ `1 è½¦ç‰Œå·`
2. è½¦è¾†ç¦»å¼€ï¼šè¾“å…¥ `2 è½¦ç‰Œå·`
3. æ˜¾ç¤ºåœè½¦åœºçŠ¶æ€ï¼šè¾“å…¥ `3`
4. é€€å‡ºç³»ç»Ÿï¼šè¾“å…¥ `0`

```c
void printMenu() {
    printf("\n===== åœè½¦åœºç®¡ç†ç³»ç»Ÿ =====\n");
    printf("1. è½¦è¾†è¿›å…¥ (è¾“å…¥: 1 è½¦ç‰Œå·)\n");
    printf("2. è½¦è¾†ç¦»å¼€ (è¾“å…¥: 2 è½¦ç‰Œå·)\n");
    printf("3. æ˜¾ç¤ºåœè½¦åœºçŠ¶æ€\n");
    printf("0. é€€å‡ºç³»ç»Ÿ\n");
    printf("è¯·è¾“å…¥æ“ä½œå‘½ä»¤: ");
}
```

## ç¼–è¯‘å’Œè¿è¡Œ

### åœ¨Windowsç³»ç»Ÿä¸Š

1. åŒå‡» `compile.bat` æ–‡ä»¶ï¼Œå®ƒä¼šå°è¯•ä½¿ç”¨ä¸åŒçš„ç¼–è¯‘å™¨æ¥ç¼–è¯‘é¡¹ç›®
2. å¦‚æœç¼–è¯‘æˆåŠŸï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿è¡Œ

### åœ¨å…¶ä»–ç³»ç»Ÿä¸Š

ä½¿ç”¨GCCç¼–è¯‘å™¨ï¼š

```bash
gcc -Wall -o parking_system main.c parking.c
./parking_system
```

## ç³»ç»Ÿä¼˜åŒ–

æœ¬ç³»ç»Ÿè¿›è¡Œäº†å¤šé¡¹ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ï¼š

1. **å†…å­˜ç®¡ç†ä¼˜åŒ–**ï¼š
   - æ·»åŠ äº†ä¸“é—¨çš„å†…å­˜æ¸…ç†å‡½æ•°
   - ä¼˜åŒ–äº†å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„é€»è¾‘

2. **è½¦è¾†æŸ¥æ‰¾é€»è¾‘ä¼˜åŒ–**ï¼š
   - æ·»åŠ äº†ä¸“é—¨çš„è½¦è¾†æŸ¥æ‰¾å‡½æ•°
   - ä¼˜åŒ–äº†è½¦è¾†ç§»åŠ¨çš„é€»è¾‘ï¼Œå‡å°‘ä¸å¿…è¦çš„æ“ä½œ

3. **è½¦ç‰Œå·é‡å¤æ£€æŸ¥**ï¼š
   - é˜²æ­¢åŒä¸€è½¦ç‰Œå·å¤šæ¬¡è¿›å…¥ç³»ç»Ÿ
   - æé«˜äº†ç³»ç»Ÿçš„å¥å£®æ€§

4. **åœè½¦è´¹ç”¨è®¡ç®—ä¼˜åŒ–**ï¼š
   - æ›´è¯¦ç»†çš„æ—¶é—´å’Œè´¹ç”¨è®¡ç®—
   - æ›´å‹å¥½çš„è´¹ç”¨æ˜¾ç¤º

5. **è¾“å‡ºä¿¡æ¯ä¼˜åŒ–**ï¼š
   - æ›´è¯¦ç»†çš„æ“ä½œæç¤º
   - æ›´æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯

## æ‰©å±•åŠŸèƒ½å»ºè®®

ç³»ç»Ÿå¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ•°æ®æŒä¹…åŒ–**ï¼šå°†åœè½¦è®°å½•ä¿å­˜åˆ°æ–‡ä»¶ä¸­
2. **å›¾å½¢ç”¨æˆ·ç•Œé¢**ï¼šä½¿ç”¨å›¾å½¢åº“å®ç°æ›´å‹å¥½çš„ç•Œé¢
3. **æ›´å¤šè½¦è¾†ä¿¡æ¯**ï¼šæ·»åŠ è½¦å‹ã€é¢œè‰²ç­‰ä¿¡æ¯
4. **å¤æ‚è®¡è´¹è§„åˆ™**ï¼šå®ç°ä¸åŒæ—¶æ®µä¸åŒè´¹ç‡çš„è®¡è´¹è§„åˆ™
5. **å¤šåœè½¦åœºç®¡ç†**ï¼šæ‰©å±•ä¸ºç®¡ç†å¤šä¸ªåœè½¦åœºçš„ç³»ç»Ÿ

## æ€»ç»“

æœ¬åœè½¦åœºç®¡ç†ç³»ç»Ÿé€šè¿‡æ ˆå’Œé˜Ÿåˆ—æ•°æ®ç»“æ„ï¼ŒæˆåŠŸæ¨¡æ‹Ÿäº†ä¸€ä¸ªç‰¹æ®Šåœè½¦åœºçš„è¿ä½œæµç¨‹ã€‚ç³»ç»Ÿå®ç°äº†è½¦è¾†è¿›å…¥ã€ç¦»å¼€ã€è´¹ç”¨è®¡ç®—ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶è¿›è¡Œäº†å¤šé¡¹ä¼˜åŒ–ï¼Œä½¿å…¶æ›´åŠ å¥å£®å’Œç”¨æˆ·å‹å¥½ã€‚
